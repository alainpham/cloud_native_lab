admin_client:
  storage:
    s3:
      bucket_name: enterprise-logs-admin
auth:
  type: enterprise
auth_enabled: true
cluster_name: enterprise-logs
common:
  # compactor_address: http://infra:2100 # should point to the read path
  # compactor_grpc_address: infra:8095 # should point to the read path
  path_prefix: /var/lib/enterprise-logs
  replication_factor: 3
  storage:
    s3:
      access_key_id: admin
      bucketnames: enterprise-logs-chunks
      endpoint: infra:9000
      insecure: true
      s3forcepathstyle: true
      secret_access_key: password
compactor:
  compaction_interval: 10m
  delete_batch_size: 70
  delete_max_interval: 0s
  delete_request_cancel_period: 24h
  deletion_mode: filter-and-delete
  retention_delete_delay: 1h
  retention_delete_worker_count: 150
  retention_enabled: true
  retention_table_timeout: 0s
ingester:
  max_chunk_age: 2h
license:
  path: /etc/enterprise-logs/license.jwt
limits_config:
  enforce_metric_name: false
  ingestion_burst_size_mb: 6
  ingestion_rate_mb: 4
  max_cache_freshness_per_query: 10m
  max_chunks_per_query: 2000000
  max_line_size: 0
  max_line_size_truncate: false
  max_query_parallelism: 32
  max_query_series: 500
  reject_old_samples: true
  reject_old_samples_max_age: 1w
  retention_period: 31d
  retention_stream: []
  split_queries_by_interval: 15m
  unordered_writes: true
memberlist:
  join_members:
    - infra:7946
querier:
  max_concurrent: 15
  query_ingesters_within: 15m
query_range:
  align_queries_with_step: true
  cache_results: true
  results_cache:
    cache:
      default_validity: 12h
      memcached_client:
        addresses: dns+infra:11213
        timeout: 500ms
ruler:
  storage:
    s3:
      access_key_id: admin
      bucketnames: enterprise-logs-ruler
      endpoint: infra:9000
      insecure: true
      s3forcepathstyle: true
      secret_access_key: password
    type: s3
  enable_sharding: true
runtime_config:
  file: /etc/enterprise-logs/runtime-config/runtime-config.yaml
schema_config:
  configs:
  - from: "2023-01-01"
    index:
      period: 24h
      prefix: loki_index_
    object_store: s3
    schema: v12
    store: tsdb
server:
  grpc_listen_port: 9095
  http_listen_port: 3100
  http_server_read_timeout: 5m
  http_server_write_timeout: 5m
  log_level: info
storage_config:
  hedging:
    at: 250ms
    max_per_second: 20
    up_to: 3
table_manager:
  retention_deletes_enabled: false
  retention_period: 0